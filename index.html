<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="libs/three.js"></script>
    <script src="libs/EffectComposer.js"></script>
    <script src="libs/ShaderPass.js"></script>
    <script src="libs/RenderPass.js"></script>
    <script src="libs/CopyShader.js"></script>
    <script src="libs/SepiaShader.js"></script>
    <script src="libs/DigitalGlitch.js"></script>
    <script src="libs/GlitchPass.js"></script>
		<script>
	// 		// Our Javascript will go here.
  //     var scene = new THREE.Scene();
  //     var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
	//
  //     var renderer = new THREE.WebGLRenderer();
  //     renderer.setSize( window.innerWidth, window.innerHeight );
  //     document.body.appendChild( renderer.domElement );
	//
  //     // var geometry = new THREE.BoxGeometry( 1, 1, 1 );
  //     // var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
  //     // var cube = new THREE.Mesh( geometry, material );
  //     // scene.add( cube );
	//
  //     camera.position.z = 5;
	//
  //     // var map = new THREE.TextureLoader().load( "sprite.png" );
  //     //           var material = new THREE.SpriteMaterial( { map: map, color: 0xffffff, fog: true } );
  //     //           var sprite = new THREE.Sprite( material );
  //     //           scene.add( sprite );
	//
  //     // instantiate a loader
  //     // var loader = new THREE.TextureLoader();
	// 		// var geometry = new THREE.PlaneGeometry( 12, 10, 32 );
	// 		// var material = new THREE.MeshLambertMaterial();
	// 		// var plane = new THREE.Mesh( geometry, material );
	// 		// scene.add( plane );
  //     // // load a resource
  //     // loader.load(
  //     // 	// resource URL
  //     // 	'sprite.png',
  //     // 	// Function when resource is loaded
  //     // 	function ( texture ) {
  //     //     console.log("GOT IT")
  //     // 		// do something with the texture
  //     // 		material = new THREE.MeshBasicMaterial( {
  //     // 			map: texture
	// 		// 		} );
	// 		// 		plane.material = material;
  //     // 	},
  //     // 	// Function called when download progresses
  //     // 	function ( xhr ) {
  //     // 		console.log( (xhr.loaded / xhr.total * 100) + '% loaded' );
  //     // 	},
  //     // 	// Function called when download errors
  //     // 	function ( xhr ) {
  //     // 		console.log( 'An error happened' );
  //     // 	}
  //     // );
	// 		var light = new THREE.AmbientLight(0xffffff, 0.5);
	// 		scene.add(light);
	//
	// 		var light2 = new THREE.PointLight(0xffffff, 0.5);
	// 		scene.add(light2);
	// 		var material = new THREE.MeshLambertMaterial();
	//
	// 		var geometry = new THREE.BoxBufferGeometry(100, 100, 100, 10, 10, 10);
	// 		var mesh = new THREE.Mesh(geometry, material);
	// 		mesh.position.z = -1000;
	// 		mesh.position.x = -100;
	// 		scene.add(mesh);
	//
	// //COMPOSER
	//
	// 		var composer = new THREE.EffectComposer(renderer);
	//
	// 		var renderPass = new THREE.RenderPass(scene, camera);
	// 		composer.addPass(renderPass);
	//
	// 		var sepiaPass = new THREE.ShaderPass(THREE.SepiaShader);
	// 		composer.addPass(sepiaPass);
	//
	// 		var glitchPass = new THREE.GlitchPass(0);
	// 		composer.addPass(glitchPass);
	//
  //     function render() {
	// 			composer.render();
  //     	requestAnimationFrame( render );
  //     	renderer.render( scene, camera );
  //     }
	// 		render();

	var camera, scene, renderer, composer;
var object, light;
var glitchPass;
init();
animate();
function updateOptions() {
	var wildGlitch = document.getElementById('wildGlitch');
	glitchPass.goWild=false;
}
function init() {
	renderer = new THREE.WebGLRenderer();
	renderer.setPixelRatio( window.devicePixelRatio );
	renderer.setSize( window.innerWidth, window.innerHeight );
	document.body.appendChild( renderer.domElement );
	//
	camera = new THREE.PerspectiveCamera( 10, window.innerWidth / window.innerHeight, 1, 1000 );
	camera.position.z = 300;
	scene = new THREE.Scene();
	scene.fog = new THREE.Fog( 0x000000, 1, 1000 );
	object = new THREE.Object3D();
	scene.add( object );

			var geometry2 = new THREE.PlaneGeometry( 100, 100, 32 );
			var material2 = new THREE.MeshBasicMaterial({color: 0x2194ce});
			var plane = new THREE.Mesh( geometry2, material2 );
			// plane.position.set( Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5 ).normalize();
			// plane.position.multiplyScalar( Math.random() * 400 );
			// plane.scale.x = plane.scale.y = plane.scale.z = Math.random() * 50;
			object.add(plane);


			    var loader = new THREE.TextureLoader();

		      // load a resource
		      loader.load(
		      	// resource URL
		      	'uh.png',
		      	// Function when resource is loaded
		      	function ( texture ) {
		          console.log("GOT IT")
		      		// do something with the texture
		      		material = new THREE.MeshBasicMaterial( {
		      			map: texture
							} );
							plane.material = material;
		      	},
		      	// Function called when download progresses
		      	function ( xhr ) {
		      		console.log( (xhr.loaded / xhr.total * 100) + '% loaded' );
		      	},
		      	// Function called when download errors
		      	function ( xhr ) {
		      		console.log( 'An error happened' );
		      	}
		      );

	// postprocessing
	composer = new THREE.EffectComposer( renderer );
	composer.addPass( new THREE.RenderPass( scene, camera ) );
	glitchPass = new THREE.GlitchPass();
	glitchPass.renderToScreen = true;
	composer.addPass( glitchPass );
	//
	window.addEventListener( 'resize', onWindowResize, false );
	updateOptions();
}
function onWindowResize() {
	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize( window.innerWidth, window.innerHeight );
	composer.setSize( window.innerWidth, window.innerHeight );
}
function animate() {
	requestAnimationFrame( animate );
	var time = Date.now();
	// object.rotation.x += 0.005;
	// object.rotation.y += 0.01;
	composer.render();
	//renderer.render(scene, camera);
}


		</script>
	</body>
</html>
